<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Ruby Styling</title>
<meta name="description" content="How to use CSS styling to support ruby text for Asian languages." />
<script type="text/javascript">
var f = { }

// AUTHORS should fill in these assignments:
f.directory = 'articles/ruby'+'/'; // the path to this file, not including /International or the file name
f.filename = 'styling'; // the file name WITHOUT extensions
f.authors = 'Richard Ishida, W3C'; // author(s) and affiliations
f.previousauthors = ''; // as above
f.modifiers = ''; // people making substantive changes, and their affiliation
f.searchString = 'article-ruby-styling'; // blog search string - usually the filename without extensions
f.firstPubDate = '2016-02-04'; // date of the first publication of the document (after review)
f.lastSubstUpdate = { date:'2016-02-04', time:'11:23'}  // date and time of latest substantive changes to this document
f.status = 'draft';  // should be one of draft, review, published, notreviewed or obsolete
f.path = '../../' // what you need to prepend to a URL to get to the /International directory 

// AUTHORS AND TRANSLATORS should fill in these assignments:
f.thisVersion = { date:'2016-02-04', time:'11:23'} // date and time of latest edits to this document/translation
f.contributors = ''; // people providing useful contributions or feedback during review or at other times
// also make sure that the lang attribute on the html tag is correct!

// TRANSLATORS should fill in these assignments:
f.translators = 'xxxNAME, ORG'; // translator(s) and their affiliation - a elements allowed, but use double quotes for attributes

f.breadcrumb = 'markup';

f.additionalLinks = ''
</script>
<script type="text/javascript" src="styling-data/translations.js"> </script>
<script type="text/javascript" src="../../javascript/doc-structure/article-dt.js"> </script>
<script type="text/javascript" src="../../javascript/boilerplate-text/boilerplate-en.js"></script><!--TRANSLATORS must change -en to the subtag for their language!-->
<script type="text/javascript" src="../../javascript/doc-structure/article.js"> </script>
<script type="text/javascript" src="../../javascript/articletoc-html5.js"></script>
<link rel="stylesheet" href="../../style/article-2016.css" type="text/css" />
<link rel="copyright" href="#copyright"/>
<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<style>
.rubyExample { font-size: 40px; font-family: "ms mincho"; margin: 0; }
.el { color: #D61B1B; font-size: 100%; font-weight: 400; margin: 0 2px; }
.nowrap { white-space:nowrap; }
</style>
<script>
function highlightCode () {
	var examples = document.querySelectorAll('figure.example')
	for (var i=0;i<examples.length;i++) {
		var re = /&lt;([^&]+)&gt;/
		var content = examples[i].innerHTML
		out = content.replace(/&lt;([^&]+)&gt;/g,'<span class="el">&lt;$1&gt;</span>')
		examples[i].innerHTML = out
		}
	}
</script>
</head>

<body>
<header>
  <nav id="mainNavigation"></nav><script>document.getElementById('mainNavigation').innerHTML = mainNavigation</script>
  
  <h1>Ruby Styling (draft!)</h1>
</header>


<section>
  <div id="audience">
    <p><span id="intendedAudience" class="leadin">Intended audience:</span> 
    XHTML/HTML coders (using editors or scripting), script developers (PHP, JSP, etc.), CSS coders, and
      anyone who wants to know how to use ruby annotations. </p>
    <div id="updateInfo"></div><script>document.getElementById('updateInfo').innerHTML = g.updated</script>
    </div>
    
  <p>Ruby is the name given to the small annotations in Japanese and Chinese content that are rendered alongside base text, usually to provide phonetic information, but sometimes to provide other information. We will assume that you are familiar with how you want your ruby to look. (If not,  <a class="print" href="/International/articles/ruby/">see the short overview</a> of how ruby works.)</p>
  <p>This article will only discuss how to use CSS <em>styling</em> to affect the rendering of ruby content. For information about how to create the markup needed to support ruby, see <a href="/International/articles/ruby/markup" class="print">Ruby Markup</a>.</p>
  <p>The editor's draft of the <a href="https://drafts.csswg.org/css-ruby-1/">CSS Ruby Layout Module Level 1</a> provides a number of initial properties for describing the placement of ruby text in relation to the base text. Later versions of the spec are expected to add more properties. Note that
    this specification is not yet finalized, so this section will aim to give you an idea of what to expect if it is fully implemented, as well as describing what is currently supported.</p>
  <p>We won't simply reproduce the spec itself here, but rather provide guidance about how content authors can achieve key techniques. We will assume that your ruby content is marked up appropriately, so that the mapping between ruby bases and ruby text is correct.</p>
</section>


<section>
  <h2 id="ruby_position"><a href="#ruby_position">Positioning ruby relative to the base text</a></h2>
    <p> The  property <code class="kw" translate="no">ruby-position</code> allows you to indicate where ruby text should appear relative to the base
      text.</p>
    <p><code class="kw" translate="no">ruby-position</code> can have the following values: <code class="kw" translate="no">over</code>, <code class="kw" translate="no">under</code>, and <code class="kw" translate="no">inter-character</code>. You would apply this style to the <code class="kw" translate="no">ruby</code> element. We will also mention, in this section, how to make the ruby text appear inline after the ruby base.</p>
    
    <section>
    <h3 id="position_over"><a href="#position_over">Positioning ruby text 'over' the base</a></h3>
    <p>By 'over' we mean above horizontal text and to the right of vertical CJK text.</p>
    <figure>
      <p lang="ja" class="rubyExample" style="float:left;margin-right: 5em;"><ruby><rb>水</rb><rt>みず</rt><rb>芝</rb><rt>し</rt><rb>居</rb><rt>ばい</rt></ruby></p>
      <p lang="ja" class="rubyExample" style="float:left; writing-mode: vertical-rl;"><ruby><rb>水</rb><rt>みず</rt><rb>芝</rb><rt>し</rt><rb>居</rb><rt>ばい</rt></ruby></p>
    </figure><br style="clear:left;"/>
    <p>This is
      the default behavior, and you can expect browsers to produce this without CSS. </p>
    <p>If you need to place the ruby explicitly in this position, use:      </p>
    <figure class="example" lang="ja">
      <p>ruby { ruby-position: over; }</p>
    </figure>
    <p>To position the ruby text below horizontal base text or to the left of vertical text, use <code>ruby-position: under</code>.</p>
  </section>
    
    <section>
    <h3 id="position_under"><a href="#position_under">Positioning ruby text 'under' the base</a></h3>
    <p>By 'under' we mean below horizontal text and to the left of vertical CJK text.</p>
    <figure>
      <p lang="ja" class="rubyExample" style="float:left;margin-right: 5em;"><ruby style="ruby-position: under;"><rb>水</rb><rt>みず</rt><rb>芝</rb><rt>し</rt><rb>居</rb><rt>ばい</rt></ruby></p>
      <p lang="ja" class="rubyExample" style="float:left; writing-mode: vertical-rl;"><ruby style="ruby-position: under;"><rb>水</rb><rt>みず</rt><rb>芝</rb><rt>し</rt><rb>居</rb><rt>ばい</rt></ruby></p>
    </figure><br style="clear:left;"/>
    <p>This position is often used in Japanese for semantic information (as opposed to phonetic labelling). It is also used sometimes for pinyin annotations in Chinese. Here is an example from the moedict dictionary.</p>
    <figure>
    <p><img src="styling-data/pinyin-under.png" width="267" height="190" alt=""/></p>
    </figure>
    <p>To produce this effect, use: </p>
    <figure class="example" lang="ja">
      <p>ruby { ruby-position: under; }</p>
    </figure>
    </section>
    
    <section>
    <h3 id="bopomofo_position"><a href="#bopomofo_position">Positioning bopomofo ruby</a></h3>
    <p>In Traditional Chinese, bopomofo (zhuyin fuhao) ruby appears to the right of the base character, whether the text is set horizontally or vertically. Furthermore, the bopomofo annotation is always set vertically and the tone marks (apart from the light tone) are moved into an additional column to the right of the bopomofo characters.</p>
    <figure style="font-family: 'LiSong Pro';">
    <p><img src="styling-data/bopomofo.png" alt="Ruby for 電(ㄉㄧㄢˋ)腦(ㄋㄠˇ)"></p>
      <!--p lang="zh-TW" class="rubyExample" style="float:left;margin-right: 5em;"><ruby style="ruby-position: under; font-size: 60px;"><rb>電</rb><rt style="font-size=30%;">ㄉㄧㄢˋ</rt><rb>腦</rb><rt style="font-size:30%;">ㄋㄠˇ</rt></ruby></p>
      <p lang="zh-TW" class="rubyExample" style="float:left; writing-mode: vertical-rl;"><ruby style="ruby-position: under; font-size: 60px;"><rb>電</rb><rt style="font-size:30%;">ㄉㄧㄢˋ</rt><rb>腦</rb><rt style="font-size:30%;">ㄋㄠˇ</rt></ruby></p-->
    </figure>
    <p>The vertical placement for the bopomofo and the relative position of the tone characters within the invisible box to the right of the Han base character relies on the browser, and possibly font information. You don't need to specify anything in CSS. </p>
    <p>What you <em>do</em> have to do in CSS, however, is indicate that this will be bopomofo ruby, so that the annotation doesn't appear 'over' or 'under' the base text. To do that, you need the <code class="kw" translate="no">inter-character</code> value of <code class="kw" translate="no">ruby-position</code>.</p>
    <figure class="example" lang="ja">
      <p>ruby { ruby-position: inter-character; }</p>
    </figure>
    </section>
    
    <section>
    <h3 id="double_position"><a href="#double_position">Positioning for double-sided ruby</a></h3>
      <p>Actually, the Traditional Chinese example above from the moedict dictionary attaches two types of ruby to each base character: bopomofo and pinyin. In this case you need to be specific about which bit of ruby text needs to appear where. This is complicated a little because there are two possible ways to create markup for double-sided ruby (see the <a href="markup">Ruby Markup</a> article for more details).</p>
      <p>If you use the 'tabular' model of markup the styling is reasonably straightforward, and involves setting <code class="kw" translate="no">ruby-position</code> on the appropriate <code class="kw" translate="no">rtc</code> element. Given markup such as the following:</p>
      <div class="sidenoteGroup">
      <figure class="example" lang="ja">
        <p>&lt;ruby&gt;<br>
          &lt;rb&gt;電&lt;rb&gt;腦<br>
        &lt;rtc&gt;&lt;rt&gt;ㄉㄧㄢˋ&lt;rt&gt;diàn&lt;/rt&gt;&lt;/rtc&gt;<br>
        &lt;rtc&gt;
        &lt;rt&gt;ㄋㄠˇ&lt;rt&gt;nǎo&lt;/rt&gt;&lt;/rtc&gt;<br>
        &lt;/ruby&gt;</p>
      </figure>
      <aside class="sideinfonote"><p class="warning">To make the examples of markup easier to read, we have split the ruby element components onto several lines. In theory, this should work fine. However, in practise, Microsoft Edge will add unwanted spaces to the rendered text. Therefore you should keep all the markup on a single line.</p></aside>
      </div>
      <p>you could use CSS like this:</p>
      <figure class="example" lang="ja">
        <p>ruby { ruby-position: inter-character; }<br>
        rtc + rtc { ruby-position: under; } </p>
      </figure>
      <p>If you use nested markup, and you have markup such as the following:</p>
      <figure class="example" lang="ja">
        <p>&lt;ruby&gt;<br>
        &lt;ruby&gt;電&lt;rt&gt;ㄉㄧㄢˋ&lt;/rt&gt;&lt;/ruby&gt;&lt;rt&gt;diàn&lt;/rt&gt;<br>
        &lt;ruby&gt;腦&lt;rt&gt;ㄋㄠˇ&lt;/rt&gt;&lt;/ruby&gt;&lt;rt&gt;nǎo&lt;/rt&gt;<br>
        &lt;/ruby&gt;</p>
      </figure>
      <p>If you use nested markup, it is probably easier if you use an approach such as the following:</p>
      <figure class="example" lang="ja">
        <p>ruby + rt { ruby-position: under; }<br>
          ruby &gt; ruby &gt; rt { ruby-position: inter-character; }
        </p>
      </figure>

    <section>
    <h3 id="inline_position"><a href="#inline_position">Rendering ruby text inline</a></h3>
    <p>In some situations you may want the ruby text to appear inline, after the base text. For example, the Ruby markup article describes accessibility requirements. In other cases you may want to do this because the user interface is too small for legible</p>
    <figure style="font-family: 'LiSong Pro';">
    <p><img src="styling-data/bopomofo.png" alt="Ruby for 電(ㄉㄧㄢˋ)腦(ㄋㄠˇ)"></p>
      <!--p lang="zh-TW" class="rubyExample" style="float:left;margin-right: 5em;"><ruby style="ruby-position: under; font-size: 60px;"><rb>電</rb><rt style="font-size=30%;">ㄉㄧㄢˋ</rt><rb>腦</rb><rt style="font-size:30%;">ㄋㄠˇ</rt></ruby></p>
      <p lang="zh-TW" class="rubyExample" style="float:left; writing-mode: vertical-rl;"><ruby style="ruby-position: under; font-size: 60px;"><rb>電</rb><rt style="font-size:30%;">ㄉㄧㄢˋ</rt><rb>腦</rb><rt style="font-size:30%;">ㄋㄠˇ</rt></ruby></p-->
    </figure>
    <p>The vertical placement for the bopomofo and the relative position of the tone characters within the invisiblotation doesn't appear 'over' or 'under' the base text. To do that, you need the <code class="kw" translate="no">inter-character</code> value of <code class="kw" translate="no">ruby-position</code>.</p>
    <figure class="example" lang="ja">
      <p>ruby { ruby-position: inter-character; }</p>
  </figure>
    </section>
    
    </section>
 
    
    
    
    
    
    
    <section>
      <p>If you want to force the ruby text to appear inline you would use <code>ruby-position: inline</code>. Note that due to an error this
      is not explained in the current version of the CSS3 Ruby specification.</p>
    <figure>
      <p><img src="styling-data/ruby-position-inline.gif" alt="Ruby-position: inline" width="331" height="227" /> </p>
      <figcaption>Ruby-position: inline</figcaption>
  </figure>
    <p>The parentheses in the illustration above need to be provided in the <code class="kw" translate="no">rp</code> markup.</p>
</section>
 </section>
<section>
<section>
  <h2 id="endlinks"><a href="#endlinks">Further reading</a></h2>
<aside class="section" id="survey"> </aside><script>document.getElementById('survey').innerHTML = g.survey</script>

  <ul id="full-links">
    <li>
      <p><a href="index">What is ruby?</a></p>
    </li>
    <li>
      <p>Related links, <cite>Authoring HTML &amp; CSS</cite></p>
      <ul>
        <li><a href="/International/techniques/authoring-html#ruby">Using ruby markup</a></li>
        <li><a href="/International/techniques/authoring-html#rubystyle">Styling ruby text</a></li>
      </ul>
    </li>
  </ul>
</section>

<footer id="thefooter"></footer><script type="text/javascript">document.getElementById('thefooter').innerHTML = g.bottomOfPage</script>
<script type="text/javascript">completePage(); highlightCode();</script>
</body>
</html>
